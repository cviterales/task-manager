(this.webpackJsonptask_manager=this.webpackJsonptask_manager||[]).push([[13],{154:function(e,t,n){"use strict";n(155),n(156);var a=n(1);t.a=function(e){var t=e.children,n=e.hoverCheck,c=void 0!==n&&n,r=e.style,s=void 0===r?"":r,i="wrapper ".concat(s);return c&&(i="wrapper_hover ".concat(s)),Object(a.jsx)("div",{className:i,children:Object(a.jsx)(a.Fragment,{children:t})})}},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){"use strict";n(0);var a=n(352),c=n(1);t.a=function(e){var t=e.index,n=e.children,r=e.delay,s=void 0===r?.05:r;return Object(c.jsx)(a.a.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1,transition:{delay:s*t}},exit:{y:-100,opacity:0},children:n})}},159:function(e,t,n){"use strict";n(0);var a=n(165),c=n.n(a),r=n(56),s=n(41),i=n(1);t.a=function(e){var t=e.type,n=e.message,a=c.a.success,o=s.j;switch(t){case"error":a=c.a.danger,o=s.G;break;case"info":a=c.a.info,o=s.w;break;case"success":a=c.a.success,o=s.j;break;default:a=c.a.success,o=s.j}return Object(i.jsx)("div",{className:a,children:Object(i.jsxs)("div",{className:c.a.title,children:[Object(i.jsx)(r.a,{icon:o,color:"white",size:"lg",className:c.a.icon}),Object(i.jsx)("p",{children:n})]})})}},160:function(e,t,n){"use strict";var a=n(161),c=n(164),r=n.n(c),s=n(1);t.a=function(e){var t=e.data,n=e.form,c=e.name,i=e.id,o=e.onChange,l=e.selectedValue,d=void 0===l?0:l,u=e.disabled,j=void 0!==u&&u,_=[{id:0,name:"Seleccione..."}].concat(Object(a.a)(t));return Object(s.jsx)("select",{disabled:j,"data-testid":c,className:r.a.select,name:c,form:n,id:i,onChange:o,required:!0,value:d,children:function(e){return e.map((function(e,t){return Object(s.jsx)("option",{value:e.id,disabled:0===t,children:e.name?e.name:"No hay datos"},e.name+e.id)}))}(_)})}},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(43);var c=n(58);function r(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},164:function(e,t,n){e.exports={select:"style_select__2g3EM"}},165:function(e,t,n){e.exports={success:"style_success__30vSy",danger:"style_danger__3VYR2",info:"style_info__8kZRS",seconds:"style_seconds__2kodu",icon:"style_icon__TW5-W",title:"style_title__1f0lf"}},202:function(e,t,n){e.exports={container:"style_container__3h6FR",boldText:"style_boldText__29165"}},205:function(e,t,n){"use strict";var a=n(11),c=(n(0),n(16)),r=n(202),s=n.n(r),i=n(154),o=n(1),l=function(){return Object(o.jsx)(i.a,{children:Object(o.jsx)("div",{className:s.a.container,children:Object(o.jsx)("h4",{className:s.a.boldText,children:"No tiene suficientes permisos para acceder al contenido."})})})};t.a=function(e){return function(t){var n=Object(c.c)((function(e){return e.auth.user})),r=Object(o.jsx)(e,Object(a.a)({},t));return(null===n||void 0===n?void 0:n.isAdmin)||(r=Object(o.jsx)(l,{})),r}}},346:function(e,t,n){e.exports={header:"cuadrilla_header__2jb_i",wrapper:"cuadrilla_wrapper__2DDkJ",modal_close:"cuadrilla_modal_close__1P9Ke",modal_open:"cuadrilla_modal_open__3q-n8",boldText:"cuadrilla_boldText__2csr-"}},347:function(e,t,n){e.exports={content:"style_content__2iQqH",content_center:"style_content_center__3kZwB",wrapper:"style_wrapper__3lhY3",container:"style_container__1wWCj",header:"style_header__84WZN",operator_selected:"style_operator_selected__1G5Js",operator:"style_operator__UOfA5",team:"style_team__1Ct8F",content_message:"style_content_message__2mzFV",error:"style_error__2BzCM",success:"style_success__NLWLe",content_buttons:"style_content_buttons__2WtTl",input_container:"style_input_container__3iO5Z"}},348:function(e,t,n){e.exports={rows:"style_rows__-lPPV",rows_header:"style_rows_header__2zHb6",content_card:"style_content_card__3msu5",first_col:"style_first_col__3r0PD",rest_col:"style_rest_col__2Zy9T",content_img:"style_content_img__sKitZ",error_message:"style_error_message__3JZTg"}},358:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(4),s=n(28),i=n(0),o=n(346),l=n.n(o),d=n(16),u=n(161),j=n(347),_=n.n(j),b=n(154),h=n(42),p=n(160),f=n(159),m=n(56),O=n(41),x=n(33),v=n(1),y=function(e){var t=e.selectedTeam,n=e.teamData,a=e.sendData,o=e.onClose,l=e.deleteData,d=Object(i.useState)(0),j=Object(s.a)(d,2),y=j[0],N=j[1],g=Object(i.useState)([]),w=Object(s.a)(g,2),k=w[0],C=w[1],S=Object(i.useState)({error:!1,message:""}),D=Object(s.a)(S,2),T=D[0],A=D[1],E=Object(i.useState)(!1),F=Object(s.a)(E,2),V=F[0],Z=F[1];Object(i.useEffect)((function(){N(t.id_vehicle),C(t.operators)}),[t]);var z,I=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.length>0?(Z(!0),a(y,k).then((function(e){A(T),Z(!1)}))):(A({error:!0,message:"No hay datos seleccionados!"}),setTimeout((function(){A({error:!1,message:""})}),5e3)),t.preventDefault();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(r.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(!0),l(t).then((function(e){A(T),Z(!1)})),n.preventDefault();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(b.a,{children:Object(v.jsx)("div",{className:_.a.wrapper,children:Object(v.jsxs)("div",{className:_.a.container,children:[Object(v.jsxs)("div",{className:_.a.header,children:[Object(v.jsx)("h3",{children:t.id_team?"Editar Cuadrilla # ".concat(t.id_team):"Nueva Cuadrilla"}),t.id_team&&Object(v.jsx)(h.a,{disabled:!1,variant:"outline",type:"submit",onClick:function(e){return R(e)},children:Object(v.jsx)("p",{children:"Eliminar"})})]}),Object(v.jsxs)("form",{children:[Object(v.jsxs)("div",{className:_.a.content,children:[Object(v.jsx)("label",{htmlFor:"vehiculo",children:Object(v.jsx)("h4",{children:"Vehiculo"})}),Object(v.jsx)(p.a,{data:n.vehicles,name:"vehiculo",form:"crear",id:"vehiculo",onChange:function(e){!function(e){var t=n.vehicles.find((function(t){return t.id===+e.target.value}));t&&N(t)}(e)},selectedValue:t.id_vehicle})]}),Object(v.jsxs)("div",{className:_.a.content,children:[Object(v.jsx)("label",{htmlFor:"operarios",children:Object(v.jsx)("h4",{children:"Operarios"})}),Object(v.jsx)(p.a,{data:n.operators,name:"operarios",form:"crear",id:"operarios",disabled:t.amount_task>0,onChange:function(e){return function(e){if(k&&!k.find((function(t){return t.id===+e.target.value}))){var t=n.operators.find((function(t){return t.id===+e.target.value}));C([].concat(Object(u.a)(k),[t]))}e.preventDefault()}(e)}})]}),Object(v.jsxs)("div",{className:_.a.content_team,children:[Object(v.jsx)("p",{children:"Operarios seleccionados: "}),Object(v.jsx)("div",{className:_.a.team,children:Object(v.jsxs)("ul",{children:[k&&k.length>0?(z=k,z.map((function(e,n){return Object(v.jsx)("li",{className:_.a.operator_selected,style:{listStyleType:"none"},children:Object(v.jsx)(b.a,{children:Object(v.jsxs)("div",{className:_.a.operator,children:[Object(v.jsx)("span",{children:e.id}),Object(v.jsx)("span",{children:e.name}),Object(v.jsx)("button",{onClick:function(t){return function(e,t){if(-1!==k.findIndex((function(e){return e.id===t.id}))){var n=k.filter((function(e){return e.id!==t.id}));C(n)}e.preventDefault()}(t,e)},style:{backgroundColor:"transparent"},disabled:t.amount_task>0,"data-testid":"deleteOperartor"+n,children:Object(v.jsx)(m.a,{icon:O.H,color:t.amount_task>0?"gray":"red"})})]})})},n)}))):Object(v.jsx)("div",{className:_.a.content_message,children:Object(v.jsx)("p",{children:"No tiene operarios seleccionados."})}),t.amount_task>0&&Object(v.jsx)("p",{style:{textAlign:"center",color:"red"},children:"No puede editar una cuadrilla con tareas asignadas."})]})})]}),Object(v.jsx)("div",{className:_.a.content_center,children:Object(v.jsxs)("div",{className:_.a.content_buttons,children:[Object(v.jsx)(h.a,{variant:"dark",type:"submit",onClick:function(e){return I(e)},children:Object(v.jsx)("p",{children:V?Object(v.jsx)(x.a,{}):"Guardar"})}),Object(v.jsx)(h.a,{disabled:!1,variant:"outline",type:"submit",onClick:o,children:Object(v.jsx)("p",{children:"Cancelar"})})]})}),T.error&&Object(v.jsx)(f.a,{message:T.message,type:T.error?"error":"success"})]})]})})})},N=n(348),g=n.n(N),w=n(157),k=function(e){var t=e.data,n=e.sendData;return Object(v.jsx)("div",{style:{width:"100%"},children:Object(v.jsxs)("ul",{children:[Object(v.jsxs)("li",{className:g.a.rows_header,children:[Object(v.jsx)("span",{className:g.a.first_col,children:Object(v.jsx)("p",{children:"#"})}),Object(v.jsx)("span",{className:g.a.rest_col,children:Object(v.jsx)("p",{children:"VEHICULO"})}),Object(v.jsx)("span",{className:g.a.rest_col,children:Object(v.jsx)("p",{children:"TAREAS ASIGNADA"})}),Object(v.jsx)("span",{className:g.a.rest_col,children:Object(v.jsx)("p",{children:"OPERARIOS"})})]}),t.length>0?t.map((function(e,t){return Object(v.jsx)(w.a,{index:t,children:Object(v.jsx)("li",{className:g.a.rows,onClick:function(){n(e)},children:Object(v.jsx)(b.a,{children:Object(v.jsxs)("div",{className:g.a.content_card,children:[Object(v.jsx)("span",{className:g.a.first_col,children:Object(v.jsx)("p",{children:e.id_team})}),Object(v.jsx)("span",{className:g.a.rest_col,children:Object(v.jsx)("p",{children:e.vehicle_name})}),Object(v.jsx)("span",{className:g.a.rest_col,children:Object(v.jsx)("p",{children:e.amount_task})}),Object(v.jsx)("span",{className:g.a.rest_col,children:e.operators.map((function(e){return Object(v.jsx)("img",{src:"".concat(e.photo_src),alt:"".concat(e.name),title:"".concat(e.name),width:"60",height:"60"},e.name)}))})]})})},e.id_team+t)},t)})):Object(v.jsx)("p",{className:g.a.error_message,children:"No hay cuadrillas"})]})})},C=n(57),S=n(205);t.default=Object(S.a)((function(){var e=Object(d.c)((function(e){return e.auth.user})),t=Object(i.useState)([]),n=Object(s.a)(t,2),a=n[0],o=n[1],u=Object(i.useState)(!1),j=Object(s.a)(u,2),_=j[0],b=j[1],p=Object(i.useState)({amount_task:0,id_team:null,id_vehicle:null,operators:[]}),f=Object(s.a)(p,2),m=f[0],O=f[1],x=Object(i.useState)({vehicles:[],operators:[]}),N=Object(s.a)(x,2),g=N[0],w=N[1],S=function(){var t=Object(r.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(C.b)(e.id_service,m.id_team).then((function(t){return Object(C.y)(e.id_service).then((function(e){o(e)})),O({amount_task:0,id_team:null,id_vehicle:null,operators:[]}),t})).catch((function(e){return e})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=Object(r.a)(c.a.mark((function t(n,a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m.id_team){t.next=4;break}return t.abrupt("return",Object(C.B)(e.id_service,m.id_team,n,a).then((function(t){return Object(C.y)(e.id_service).then((function(e){o(e)})),t})).catch((function(e){return e})));case 4:return t.abrupt("return",Object(C.g)(e.id_service,n,a).then((function(t){return Object(C.y)(e.id_service).then((function(e){o(e)})),t})).catch((function(e){return e})));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),T=function(){var t=Object(r.a)(c.a.mark((function t(n){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.m)(e.id_service,n);case 2:return a=t.sent,t.next=5,Object(C.z)(e.id_service,n);case 5:r=t.sent,w({vehicles:r,operators:a}),b(!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(t),T(t.id_team);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O({amount_task:0,id_team:null,id_vehicle:null,operators:[]}),T("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){Object(C.y)(e.id_service).then((function(e){o(e)}))}),[e]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:l.a.header,children:[Object(v.jsx)("h3",{style:{marginBottom:"1rem"},children:Object(v.jsx)("span",{className:l.a.boldText,children:"Cuadrillas"})}),Object(v.jsx)(h.a,{variant:"outline",disabled:!1,type:"submit",onClick:E,children:Object(v.jsx)("p",{style:{fontSize:"16px"},children:"Crear"})})]}),Object(v.jsx)("div",{className:l.a.wrapper,children:a&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(k,{data:a,sendData:A}),Object(v.jsx)("div",{className:_?l.a.modal_open:l.a.modal_close,children:_&&Object(v.jsx)(y,{onClose:function(e){b(!1),e.preventDefault()},sendData:D,deleteData:S,teamData:g,selectedTeam:m})})]})})]})}))}}]);
//# sourceMappingURL=13.b31b2679.chunk.js.map